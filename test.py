import streamlit as st

# 페이지 설정 (전체 레이아웃 사용)
st.set_page_config(
    page_title="쫄깃쩔깃돌멩이님의 응급 처치 가이드",
    layout="wide",
    initial_sidebar_state="expanded"
)

# --- 응급 처치 정보 데이터 ---
# 각 상처 유형별 제목, 설명, 처치법, 검색 키워드를 포함합니다.
first_aid_data = {
    "찰과상": {
        "제목": "찰과상 (긁힌 상처) 응급 처치",
        "설명": "피부 표면이 긁히거나 벗겨진 상처입니다. 대부분 경미하지만, 감염 예방이 중요합니다.",
        "처치법": """
        1.  **상처 부위 확인 및 세척**: 깨끗한 흐르는 물과 비누로 상처 부위를 부드럽게 씻어냅니다. 흙이나 이물질이 있다면 완전히 제거해야 합니다. [【3】](https://khna.or.kr/homecare/01_first/adult07.php)
        2.  **지혈**: 소독된 거즈나 깨끗한 천으로 상처 부위를 가볍게 압박하여 출혈을 멈춥니다.
        3.  **소독**: 소독약을 바르거나 항생제 연고를 얇게 바릅니다. 알레르기 반응에 주의하세요. [【5】](http://jejupureunburn.com/sub05/sub05_03.php)
        4.  **상처 덮기**: 감염을 막기 위해 멸균 거즈나 밴드로 상처를 덮어줍니다. 통풍이 잘 되게 해주고, 너무 세게 조이지 않도록 합니다.
        5.  **의료기관 방문**: 상처가 깊거나 오염이 심한 경우, 출혈이 멈추지 않거나 감염 징후(부어오름, 통증, 고름 등)가 보이면 즉시 의료기관을 방문해야 합니다. [【3】](https://khna.or.kr/homecare/01_first/adult07.php)
        """,
        "키워드": ["긁힘", "벗겨짐", "피부 상처", "쓸림", "찰과상"]
    },
    "화상": {
        "제목": "화상 응급 처치",
        "설명": "뜨거운 물, 불, 전기, 화학 물질 등으로 인해 피부 조직이 손상된 상태입니다. 화상 정도에 따라 처치법이 달라지며, 신속한 초기 대응이 중요합니다.",
        "처치법": """
        1.  **신속한 냉각**: 화상 부위를 즉시 찬물(수도꼭지 물이 아닌, 미지근한 정도의 차가운 물)에 15-20분 정도 담그거나 흐르는 물로 식혀줍니다. 얼음은 사용하지 마세요. [【1】](http://www.bestianseoul.com/%ED%99%94%EC%83%81burn%EC%A0%95%EB%B3%B4/%ED%99%94%EC%83%81%EC%9D%91%EA%B8%89%EC%B2%98%EC%B9%98/)
        2.  **옷, 장신구 제거**: 물집이 생기기 전이나 붓기 전에 화상 부위의 옷이나 반지, 시계 등 장신구를 조심스럽게 제거합니다. 옷이 피부에 붙었다면 억지로 떼어내지 마세요.
        3.  **물집은 터뜨리지 않기**: 물집은 감염을 막아주는 보호막 역할을 합니다. 절대로 터뜨리지 마세요.
        4.  **깨끗한 거즈로 덮기**: 화상 부위를 깨끗하고 소독된 거즈나 천으로 느슨하게 덮어줍니다. 연고나 다른 물질을 바르지 마세요. [【5】](http://jejupureunburn.com/sub05/sub05_03.php)
        5.  **병원 방문**: 화상 부위가 넓거나 깊은 경우(2도 이상의 화상), 얼굴, 손, 발, 생식기 등 중요 부위에 화상을 입었을 경우 즉시 병원(화상 전문 병원 또는 응급실)으로 가야 합니다. 특히 전기 화상은 인대, 근육 손상이 동반될 수 있으므로 반드시 의료기관의 진찰을 받아야 합니다. [【1】](http://www.bestianseoul.com/%ED%99%94%EC%83%81burn%EC%A0%95%EB%B3%B4/%ED%99%94%EC%83%81%EC%9D%91%EA%B8%89%EC%B2%98%EC%B9%98/)
        """,
        "키워드": ["뜨거움", "불", "뜨거운 물", "전기", "열", "화상"]
    },
    "베인 상처": {
        "제목": "베인 상처 (열상) 응급 처치",
        "설명": "날카로운 물체에 의해 피부나 조직이 깊게 손상된 상처입니다. 출혈이 심할 수 있으며 감염 위험이 있습니다.",
        "처치법": """
        1.  **출혈 확인 및 지혈**: 상처 부위에 직접 깨끗한 거즈나 천을 대고 강하게 압박하여 지혈합니다. 상처 부위를 심장보다 높게 들어 올리면 도움이 됩니다.
        2.  **상처 세척**: 출혈이 멈추면 깨끗한 흐르는 물이나 생리식염수로 상처 부위를 부드럽게 세척합니다. 이물질이 있다면 조심스럽게 제거합니다.
        3.  **소독 및 연고**: 상처 주위를 소독하고, 필요에 따라 항생제 연고를 바릅니다.
        4.  **상처 덮기**: 멸균 거즈나 밴드로 상처를 덮어 감염을 예방합니다.
        5.  **의료기관 방문**: 출혈이 심하거나, 상처가 깊어서 봉합이 필요한 경우, 이물질이 깊이 박힌 경우, 오염이 심한 경우(예: 녹슨 것에 베인 경우 파상풍 위험), 감염 징후가 보이는 경우 즉시 병원에 방문하여 의사의 진찰을 받아야 합니다.
        """,
        "키워드": ["칼", "깊은 상처", "피", "찢어짐", "베임"]
    }
}

# --- 사이드바 및 메인 타이틀 ---
st.sidebar.title("🩺 응급 처치 가이드")
st.sidebar.markdown("집, 학교, 야외에서 발생할 수 있는 사고에 대한 올바른 응급 처치 방법을 알아보세요.")

# 검색 기능
search_query = st.sidebar.text_input("특정 증상/사고 검색 (예: 화상, 긁힘)")

# 주요 상처 유형 선택
selected_type = st.sidebar.selectbox(
    "혹은 주요 상처 유형 선택",
    ["소개"] + list(first_aid_data.keys()),
    index=0 # '소개'가 기본 선택
)

st.title("🏡 일상생활 응급 처치 안내 웹사이트")
st.markdown("---")

# --- 내용 표시 로직 ---
if search_query:
    st.subheader(f"🔍 '{search_query}' 검색 결과")
    found_results = False
    for key, value in first_aid_data.items():
        # 키워드 및 제목에서 검색어 일치 여부 확인
        if search_query.lower() in key.lower() or any(search_query.lower() in k.lower() for k in value["키워"]):
            st.markdown(f"### {value['제목']}")
            st.markdown(f"**상황 설명**: {value['설명']}")
            st.markdown("---")
            st.markdown("**응급 처치법**")
            st.markdown(value['처치법'])
            st.markdown("---")
            found_results = True
    if not found_results:
        st.warning(f"죄송합니다, '{search_query}'에 대한 응급 처치 정보를 찾을 수 없습니다.")
        st.info("다른 키워드로 검색하거나, 주요 상처 유형을 선택해보세요.")
elif selected_type == "소개":
    st.subheader("안녕하세요, 쫄깃쩔깃돌멩이님의 응급 처치 가이드입니다!")
    st.markdown("""
    이 웹사이트는 일상생활에서 발생할 수 있는 다양한 응급 상황에 대비하여, 신속하고 올바른 응급 처치 정보를 제공합니다.
    갑작스러운 사고가 발생했을 때 당황하지 않고 대처할 수 있도록, 핵심 정보를 알기 쉽게 정리했습니다.

    ---
    ### **이용 방법**
    1.  **좌측 사이드바에서 원하는 상처 유형을 선택**: '찰과상', '화상', '베인 상처' 등 주요 사고 유형을 클릭하여 해당 처치법을 바로 확인하세요.
    2.  **'특정 증상/사고 검색'에 키워드 입력**: 찾고 싶은 응급 처치와 관련된 단어(예: '불', '긁힘', '칼')를 입력하여 빠르게 검색할 수 있습니다.

    ---
    ### **알림**
    제공되는 모든 정보는 **일반적인 초기 응급 처치 안내**입니다. 상처의 정도가 심하거나, 출혈이 멈추지 않거나, 통증이 극심한 경우 등 전문가의 진단과 치료가 반드시 필요한 상황에서는 지체 없이 **의료기관에 방문**해주세요. [【3】](https://khna.or.kr/homecare/01_first/adult07.php)
    """)

else: # 특정 유형이 선택되었을 때
    info = first_aid_data[selected_type]
    st.subheader(f"✨ {info['제목']}")
    st.markdown(f"**상황 설명**: {info['설명']}")
    st.markdown("---")
    st.markdown("**응급 처치법**")
    st.markdown(info['처치법'])
    st.markdown("---")

st.markdown("""
<style>
    .reportview-container .main .block-container{
        padding-top: 2rem;
        padding-right: 5rem;
        padding-left: 5rem;
        padding-bottom: 2rem;
    }
    .css-1d391kg {
        padding-top: 3.5rem;
        padding-right: 1rem;
        padding-left: 1rem;
        padding-bottom: 3.5rem;
    }
</style>
""", unsafe_allow_html=True)

# 푸터 (선택 사항)
st.sidebar.markdown("---")
st.sidebar.info("본 웹사이트의 내용은 정보 제공을 목적으로 하며, 전문적인 의료 조언을 대체할 수 없습니다.")

